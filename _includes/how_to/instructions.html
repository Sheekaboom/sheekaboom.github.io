<!-- Put all of the instructions defined in our YAML frontmatter -->

<ol class='how_to_steps'>
{% for step in page.steps %}

    <li>
        {{ step.name }} <hr>
        {% if step.text %}<p>{{ step.text }}</p>{% endif %}
        <ol class='how_to_directions'>
        {% for dir in step.directions %}
            <li> {{ dir.text }} </li>
        {% endfor %}
        </ol>
    </li>

{% endfor %}
</ol>

<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "HowTo",
    "step": [
    {% for step in page.steps %}
    {
        "@type": "HowToStep",
        "url": "{{ page.url | absolute_url }}",
        "name": "{{ step.name }}",
        {% if step.directions %}
        "itemListElement": [
        {% for dir in step.directions %}
        {
            "@type": "HowToDirection",
            "text": "{{ dir.text }}"
        }{% if forloop.index != step.directions.size %},{% endif %}
        {% endfor %}
        ],
        {% endif %}
        {% if step.image %}
        "image": {
            "@type": "ImageObject",
            "url": {{ step.image }},
        }
        {% endif %}
    }{% if forloop.index != page.steps.size %},{% endif %}
    {% endfor %}
    ]
}
</script>